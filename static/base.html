<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>COLMAPDemo</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
        }

        #canvas {
            width: 100%;
            height: 100vh;
        }
    </style>
</head>
<body>
    <div id="canvas"></div>

    <script>
        // Create a scene
        const scene = new THREE.Scene();

        // Create a camera
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.z = 5;

        // Create a renderer
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.getElementById('canvas').appendChild(renderer.domElement);

        // Create geometry
        const geometry = new THREE.BoxGeometry();
        const material = new THREE.MeshBasicMaterial({ color: 0x00ff00 });
        const cube = new THREE.Mesh(geometry, material);
        scene.add(cube);

        // Animate the cube
        function animate() {
            requestAnimationFrame(animate);

            cube.rotation.x += 0.01;
            cube.rotation.y += 0.01;

            renderer.render(scene, camera);
        }

        animate();

        // Handle keyboard events
        const keys = {
            w: false,
            a: false,
            s: false,
            d: false
        };

        document.addEventListener('keydown', function(event) {
            const key = event.key.toLowerCase();
            if (keys.hasOwnProperty(key)) {
                keys[key] = true;
            }
        });

        document.addEventListener('keyup', function(event) {
            const key = event.key.toLowerCase();
            if (keys.hasOwnProperty(key)) {
                keys[key] = false;
            }
        });

        // Handle mouse movement
        const mouse = {
            x: 0,
            y: 0
        };

        document.addEventListener('mousemove', function(event) {
            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
        });

        // Update camera position and rotation
        function updateCamera() {
            if (keys.w) {
                camera.position.z -= 0.1;
            }
            if (keys.a) {
                camera.position.x -= 0.1;
            }
            if (keys.s) {
                camera.position.z += 0.1;
            }
            if (keys.d) {
                camera.position.x += 0.1;
            }

            camera.lookAt(scene.position);
            camera.rotation.y += mouse.x * 0.01;
            camera.rotation.x += mouse.y * 0.01;
        }

        // Render loop
        function render() {
            requestAnimationFrame(render);

            updateCamera();

            renderer.render(scene, camera);
        }

        render();
    </script>
</body>
</html>